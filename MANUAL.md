# ✨ もう見逃さない！Webサイト更新通知ツール MANUAL ✨

「お気に入りのブログの最新記事、限定商品の再入荷、好きなアーティストのライブ情報…」

このツールは、そんなあなたが見逃したくないWebサイトの更新を24時間365日チェックし、変更があったら**すぐにLINEでお知らせしてくれる**、あなた専用の頼れるアシスタントです。

![line-image](https://i.imgur.com/fA4a7vA.png) (*通知イメージ*)

---

## 🚀 このツールのすごいところ！

- **🤖 24時間自動で監視**：一度設定すれば、PCを閉じても、あなたが寝ている間も、健気にサイトをチェックし続けます。
- **🔔 LINEで即通知**：更新があれば、使い慣れたLINEに通知が届くので、見逃す心配がありません。
- **🎯 特定の場所だけ監視**：ページ全体はもちろん、「"在庫なし"の表示が変わった時だけ」といった、特定の部分だけを狙って監視することもできます。（エルメスモード）
- **💻 簡単な設定画面**：専門知識は不要！分かりやすい画面で、誰でも簡単に監視したいサイトを登録・管理できます。

---

## 🔧 ご利用前の準備 (一番大事なところ！)

このツールを使うには、LINEに通知を送るための「合言葉」のようなものが必要になります。少しだけ手順が必要ですが、ここを乗り越えれば快適な通知ライフが待っています！

### 1. LINE Developersへの登録

まずは、LINE Botを作るための開発者サイトにアクセスし、ご自身のLINEアカウントでログインします。

▶ [LINE Developers](https://developers.line.biz/ja/)

### 2. 「プロバイダー」の作成

初めて利用する場合は、「プロバイダー」を作成します。あなたの名前やニックネームなどでOKです。

### 3. 「チャネル」の作成

次に、通知を送ってくれるBot（チャネル）を作成します。

1.  プロバイダーを選択し、**「チャネルを作成する」** をクリックします。
2.  チャネルの種類は **「Messaging API」** を選択します。
3.  チャネル名（Botの名前になります）や説明など、必要な情報を入力していきます。

### 4. ２つの「合言葉」を取得する

チャネルが作成できたら、ツールに設定するための２つの大事な情報を取得します。

#### ① チャネルアクセストークン

- 作成したチャネルの **「Messaging API設定」** タブを開きます。
- ページの一番下にある **「チャネルアクセストークン（長期）」** の項目で、**「発行」** ボタンをクリックします。
- 表示された `eyJ...` から始まる長い文字列が１つ目の合言葉です。これをコピーしておきます。

![token-image](https://i.imgur.com/5g3p5gC.png)

#### ② あなたのユーザーID

- 次に、Botが「あなた」にだけメッセージを送れるように、あなたのLINE上のIDを調べます。
- 「Messaging API設定」タブの上部にある **QRコード** を、ご自身のスマホのLINEアプリで読み取り、作成したBotを **友だち追加** します。
- Botに何か適当なメッセージ（例：「こんにちは」）を送ってください。
- **この時点ではBotから返事はありませんが、それで正常です。**

実は、あなたがBotにメッセージを送ると、LINEのサーバーにその情報が記録されます。その記録（ログ）を見ることで、あなたのユーザーIDが分かります。

- LINE Developersのチャネルの画面に戻り、**「Webhook URL」** という項目を探します。
- `https://api.line.me/v2/bot/message/webhook/receive` のようなURLの **「検証」** ボタンを押すと、先ほどのメッセージのログが表示されます。
- ログの中に `"userId": "Uxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"` という部分があります。この `U` から始まる長い文字列が、２つ目の合言葉（あなたのユーザーID）です。これをコピーしておきます。

> **【ヒント】**
> もし「検証」ボタンでログが見られない場合は、一時的に `https://example.com` などをWebhook URLに設定して「更新」ボタンを押し、再度「検証」ボタンを押すと表示されることがあります。


これで準備は完了です！お疲れ様でした！

---

## 📖 使い方ガイド

準備ができたら、いよいよツールを使ってみましょう！

### Step 1: アプリケーションを起動する

`app.py` があるフォルダで、以下のコマンドを実行します。

```bash
python app.py
```

### Step 2: 管理画面にアクセスする

コマンドを実行すると、`http://127.0.0.1:7860` のようなURLが表示されるので、お使いのWebブラウザで開きます。

### Step 3: 監視したいサイトを登録する

分かりやすい管理画面が表示されます。

![ui-image](https://i.imgur.com/O7b2j3h.png)

「新しい監視対象を追加」の欄に、以下の情報を入力します。

- **監視対象URL**: 更新をチェックしたいサイトのURL。
- **LINE Channel Access Token**: 準備のステップで取得した「チャネルアクセストークン」。
- **LINE User ID**: 同じく準備のステップで取得した「あなたのユーザーID」。
- **監視間隔**: サイトをチェックする頻度（秒単位）。短すぎるとサイトに負荷をかけるので注意！
- **監視モード**: 
  - **通常モード**: ページ全体のテキストが変わったら通知します。
  - **エルメスモード**: 特定の商品のリスト部分の変更だけを賢く検知します。（エルメス公式サイト以外ではうまく動かない可能性があります）

入力が終わったら **「リストに追加」** ボタンを押します。これで自動監視がスタートします！

### Step 4: あとは待つだけ！

サイトに更新があれば、あなたのLINEにBotから通知が届きます。これで、気になる情報を逃すことはもうありません！

---

## ❓ Q & A

**Q. 通知がまったく来ないんだけど…**

A. 以下の点を確認してみてください。
   - 「チャネルアクセストークン」と「ユーザーID」は正しく入力されていますか？コピーする際に１文字でも欠けていると動きません。
   - Botを友だち追加しましたか？
   - 実行ログに何かエラーメッセージは表示されていませんか？

**Q. 監視を止めたいサイトがある場合は？**

A. 「監視対象を削除」の欄に、リストに表示されているサイトの「ID」を入力して削除ボタンを押してください。

**Q. 「エルメスモード」って何？**

A. エルメスの公式サイトの商品ページのように、特定の部分（商品の在庫リストなど）だけを監視するための特別なモードです。他のサイトでは「通常モード」をお使いください。

---

どうぞ、快適なWebサイト監視ライフをお楽しみください！
