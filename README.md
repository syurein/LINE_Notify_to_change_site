# Webサイト更新通知ツール (Messaging API版)

登録したWebサイトを定期的に巡回し、ページの更新を検知してLINEに通知を送るアプリケーションです。

## Renderでのデプロイ (推奨)

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy)

このアプリケーションは、Webサービスホスティングプラットフォームの[Render](https://render.com/)に簡単にデプロイできます。

1.  上の「Deploy to Render」ボタンをクリックします。
2.  あなたのGitHubアカウントと連携し、このリポジトリをフォーク（コピー）して新しいリポジトリを作成します。
3.  Renderの画面で、作成したリポジトリを選択し、サービス名（例: `web-update-notifier`）を決定します。
4.  **「Create Web Service」** をクリックすると、自動でデプロイが開始されます。
5.  デプロイが完了すると、あなた専用のURLが発行されます。監視リストは永続化されるため、ブラウザを閉じても安心です。

---

## 主な機能

- 複数のURLを監視対象として登録
- 監視間隔の設定
- LINE Messaging API を利用したプッシュ通知
- 特定のHTML要素（エルメスモード）またはページ全体の変更を監視
- GradioによるWeb UI
- 監視リストの永続化 (JSON)

## 必要なもの

- Python 3.x
- LINE Messaging APIのチャネルアクセストークン
- 通知を受け取るユーザーのLINE User ID

## インストール方法

1. このリポジトリのファイルをダウンロードします。

2. 必要なライブラリをインストールします。
   ```bash
   pip install -r requirements.txt
   ```

3. Playwright用のブラウザをインストールします。初回実行時に自動でインストールされますが、手動で行う場合は以下のコマンドを実行してください。
   ```bash
   playwright install
   ```

## 実行方法

以下のコマンドを実行してアプリケーションを起動します。

```bash
python app.py
```

起動後、ターミナルに表示されるURL (例: `http://127.0.0.1:7860`) にブラウザでアクセスしてください。

## 使い方

1. Web UIにアクセスします。
2. 「新しい監視対象を追加」セクションに必要な情報を入力します。
   - **監視対象URL**: 更新をチェックしたいページのURL
   - **LINE Channel Access Token**: LINE Developersコンソールで発行した長期のチャネルアクセストークン
   - **LINE User ID**: 通知を受け取りたいあなたのLINEユーザーID (Uから始まる文字列)
   - **監視間隔 (秒)**: サイトをチェックする頻度
   - **監視モード**: 
     - `通常モード`: ページ全体のテキスト内容の変更を検知します。
     - `エルメスモード`: 特定の製品リスト要素の変更を検知します。（エルメス公式サイトの構造に特化しています）
3. 「リストに追加」ボタンをクリックすると、監視がバックグラウンドで開始されます。
4. 登録した監視対象はリストに表示されます。

## 注意事項

- LINEのチャネルアクセストークンやユーザーIDは、他人に知られないよう慎重に扱ってください。
- 監視間隔を極端に短く設定すると、対象のWebサイトに負荷をかけてしまう可能性があります。サイトの利用規約を守り、常識的な範囲で設定してください。
